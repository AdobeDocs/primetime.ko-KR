---
description: 클라이언트 비디오 플레이어 또는 매니페스트 서버는 CRS와 상호 작용하여 JIT 재패키징을 수행할 수 있습니다. 둘 다 동일한 광고 선택 논리를 사용합니다.
title: JIT 다시 패키징을 위한 자세한 워크플로우
source-git-commit: 89bdda1d4bd5c126f19ba75a819942df901183d1
workflow-type: tm+mt
source-wordcount: '524'
ht-degree: 0%

---


# JIT 다시 패키징을 위한 자세한 워크플로우 {#detailed-workflows-for-jit-repackaging}

클라이언트 비디오 플레이어 또는 매니페스트 서버는 CRS와 상호 작용하여 JIT 재패키징을 수행할 수 있습니다. 둘 다 동일한 광고 선택 논리를 사용합니다.

## 매니페스트 서버에서 시작된 JIT 다시 패키징 {#section_1F1C1B7DD146403890C2B43E24FEF0EB}

![](assets/ssai_JIT-workflow_web.png)

매니페스트 서버측에서 JIT 재패키징에 대한 워크플로는 다음과 같습니다.

1. 매니페스트 서버가 광고 서버에 요청합니다.
1. 매니페스트 서버는 HLS 형식이 아닌 광고 크리에이티브를 수신합니다.
1. 매니페스트 서버는 광고 크리에이티브의 이전에 트랜스코딩된 HLS 버전에 대한 요청을 CDN 서버에 보냅니다.

   >[!NOTE]
   >
   >다중 CDN 설정에서 매니페스트 서버는 `ptcdn` 부트스트랩 URL의 매개 변수를 사용하여 CDN 서버를 식별합니다.

1. 매니페스트 서버에서 응답을 확인합니다.

   1. 요청이 성공하면 매니페스트 서버는 이전에 코드 변환된 광고 크리에이티브의 HLS 버전을 콘텐츠 스트림에 삽입합니다.
   1. 요청이 실패하면, 매니페스트 서버는 로그 엔트리를 생성하고 CRS로부터 트랜스코딩된 버전을 요청한다.

1. CRS는 광고 크리에이티브를 트랜스코딩하고 향후 사용을 위해 CDN 서버에 HLS 버전을 업로드합니다.

해당 크리에이티브에 대한 이후의 모든 요청에 대해 매니페스트 서버는 CDN에서 HLS 버전을 검색하고 콘텐츠 스트림에 삽입합니다.

## 클라이언트가 시작한 JIT 재패키징 {#section_FBC97D40043F4FDD98247A08BB6195B0}

<!--<a id="fig_hkn_ndt_3z"></a>-->

![](assets/ssai_JIT-workflow_client_web.png)

TVSDK를 기반으로 하거나 유사한 기능을 사용하는 클라이언트는 다음과 같이 CRS와 상호 작용하여 JIT 재패키징을 수행할 수 있습니다.

1. 클라이언트가 광고 서버에서 광고를 요청합니다.
1. 광고 서버는 광고를 클라이언트에 반환합니다.
1. 클라이언트는 광고 서버에서 광고 형식을 확인합니다.

   1. 광고 크리에이티브가 HLS 형식인 경우 클라이언트는 콘텐츠에 광고 크리에이티브를 삽입(결합)하고 완료합니다.
   1. 광고 크리에이티브가 HLS 형식이 아닌 경우 클라이언트는 CDN 서버에서 광고 크리에이티브를 요청합니다.

      >[!NOTE]
      >
      >다중 CDN 설정에서 매니페스트 서버는 `ptcdn` 부트스트랩 URL의 매개 변수를 사용하여 CDN 서버를 식별합니다.

1. 클라이언트가 CDN 서버의 응답을 확인합니다.

   1. CDN이 HLS 버전을 제공한 경우 클라이언트는 해당 버전을 콘텐츠에 삽입(결합)하고 완료합니다.
   1. CDN 서버가 HLS 버전을 제공하지 않으면 클라이언트는 광고 서버에 CRS로부터 하나를 요청하도록 요청합니다. 클라이언트가 콘텐츠에 광고를 삽입하지 않습니다.

1. 광고 서버는 HLS가 아닌 광고를 HLS로 코드 변환하도록 요청합니다.
1. CRS는 HLS 버전을 생성한 다음 나중에 사용하기 위해 CDN 서버에 업로드합니다.

## 광고 형식 우선 순위 및 타임라인 {#section_A74DE37A57BF45D7B6D09E3DE40F8E61}

매니페스트 서버와 클라이언트는 동일한 선택 논리를 사용하여 사용 가능한 광고 재생의 우선 순위를 결정합니다. HLS 형식의 광고가 우선 순위이며 MP4, FLV 및 WebM이 그 뒤를 잇습니다.

CRS는 비HLS 광고 크리에이티브를 처리하는 데 일반적으로 2~4분이 필요하며, 일반적으로 3분 미만입니다.

CRS는 서로 다른 HLS 비트율을 생성하므로, 광고는 가용 연결 속도 및 대역폭에 적합한 속도로 재생할 수 있다. 사용 가능한 비트 레이트가 여러 개이면, CRS는 사용 가능한 가장 높은 비트 레이트를 선택한다. CRS가 비HLS 광고 크리에이티브를 수신하는 경우 사용 가능한 가장 높은 해상도의 HLS 버전을 생성합니다.